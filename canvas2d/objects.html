<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Image Table</title>
    <style>
        table {
            border-collapse: collapse;
            margin: 20px auto;
            text-align: center;
        }

        td {
            padding: 10px;
            border: 1px solid #ccc;
        }

        img {
            width: 150px;
            height: auto;
        }

        body {
            background: #87CEEB;
        }
    </style>
</head>

<body>

    <table>
        <tr>
            <td>Ime</td>
            <td>Pravoktnik</td>
            <td>Zajček (angl. Bunny)</td>
            <td>Žičnati model sveta</td>
            <td>Ghostscript Tiger</td>
        </tr>
        <tr>
            <td>Slika</td>
            <td>
                <div style="width:10px; height:20px; margin-left: calc(50% - 5px); background-color:orange;">
                </div>
            </td>
            <td><img style="width:20px; height:30px;" src="./bunny.png"></td>
            <td><img src="./world-mesh.svg"></td>
            <td><img src="./Ghostscript_Tiger.svg"></td>
        </tr>
        <tr>
            <td>Poti</td>
            <td>1</td>
            <td>/</td>
            <td>1</td>
            <td>??</td>
        </tr>
        <tr>
            <td>Potez v poteh</td>
            <td>4</td>
            <td>/</td>
            <td>512</td>
            <td>??</td>
        </tr>
    </table>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const svgFiles = [
                { url: './world-mesh.svg', potiCell: [2, 3], potezCell: [3, 3] },  // row 3 col 4, row 4 col 4
                { url: './Ghostscript_Tiger.svg', potiCell: [2, 4], potezCell: [3, 4] } // row 3 col 5, row 4 col 5
            ];

            const table = document.querySelector('table');

            function countCommandsInPath(pathElement) {
                const d = pathElement.getAttribute('d');
                if (!d) return 0;
                const commandRegex = /[MLHVCSQTAZmlhvcsqtaz]/g;
                const matches = d.match(commandRegex);
                return matches ? matches.length : 0;
            }

            svgFiles.forEach(file => {
                fetch(file.url)
                    .then(response => response.text())
                    .then(svgText => {
                        const parser = new DOMParser();
                        const svgDoc = parser.parseFromString(svgText, "image/svg+xml");
                        const paths = svgDoc.querySelectorAll('path');

                        table.rows[file.potiCell[0]].cells[file.potiCell[1]].textContent = paths.length;

                        const perPathCounts = Array.from(paths).map(countCommandsInPath);
                        const total = perPathCounts.reduce((sum, count) => sum + count, 0);

                        table.rows[file.potezCell[0]].cells[file.potezCell[1]].textContent = /*perPathCounts.join(' + ') + ' = ' +*/ total;
                    })
                    .catch(error => {
                        console.error(`Error loading ${file.url}:`, error);
                        table.rows[file.potiCell[0]].cells[file.potiCell[1]].textContent = "!";
                        table.rows[file.potezCell[0]].cells[file.potezCell[1]].textContent = "!";
                    });
            });
        });
    </script>

</body>

</html>